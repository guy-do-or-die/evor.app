@font-face {
  font-family: 'TASA Orbiter Text';
  src: url('/fonts/TASAOrbiterText-Bold.woff2') format('woff2'),
       url('/fonts/TASAOrbiterText-Bold.woff') format('woff');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

.word-container {
  font-family: 'TASA Orbiter Text', 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Droid Sans Mono', monospace;
  font-weight: 700;
  line-height: 1;
  position: relative;
  height: 1.3em;
  width: 7ch;
  perspective: 1200px;
  letter-spacing: 0.05em;
}

.flipper {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  animation: main-flip 8s cubic-bezier(0.65, 0, 0.35, 1) infinite;
}

.face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  display: flex;
  transform: translateZ(0);
  will-change: transform;
}

.back {
  transform: rotateY(180deg);
}

.letter {
  display: inline-block;
  width: 1ch;
  /* Subtle glow effect */
  text-shadow: 0 0 4px currentColor, 0 0 8px currentColor;
}

.letter-spaced {
  margin-left: 0.25ch;
}

.letter-compact {
  margin-left: -0.05ch;
  margin-right: -0.05ch;
}

.letter-closer {
  margin-left: -0.08ch;
}

.letter-animate {
  animation: color-transition 8s cubic-bezier(0.65, 0, 0.35, 1) infinite;
}

@keyframes color-transition {
  0% {
    color: #ef4444; /* Start with red */
  }
  3% {
    color: #ef4444; /* Hold red briefly */
  }
  15% {
    color: var(--target-color); /* Gradual transition to rainbow */
  }
  88% {
    color: var(--target-color); /* Hold rainbow color until flip back */
  }
  100% {
    color: #ef4444; /* End with red */
  }
}

.sub-flipper {
  position: relative;
  display: inline-flex;
  width: 3ch;
  height: 100%;
  transform-style: preserve-3d;
  animation: sub-flip 8s cubic-bezier(0.22, 1, 0.36, 1) infinite;
  margin-left: -0.05ch;
}

@keyframes main-flip {
  0% { 
    transform: rotateY(0deg);
  }
  7% { 
    transform: rotateY(0deg);
  }
  15% {
    transform: rotateY(-90deg);
  }
  20% { 
    transform: rotateY(-180deg);
  }
  88% { 
    transform: rotateY(-180deg);
  }
  92% {
    transform: rotateY(-270deg);
  }
  96% {
    transform: rotateY(-360deg);
  }
  100% { 
    transform: rotateY(-360deg);
  }
}

@keyframes sub-flip {
  0% { 
    transform: rotateY(0deg);
  }
  9% { 
    transform: rotateY(0deg); /* Start moving with main flip momentum */
  }
  10% { 
    transform: rotateY(-360deg); /* Kick-off from abrupt stop - 1 full spin! */
  }
  11% { 
    transform: rotateY(-1080deg); /* Massive acceleration: 3 spins */
  }
  12% { 
    transform: rotateY(-1800deg); /* Still very fast: 5 spins */
  }
  13% { 
    transform: rotateY(-2520deg); /* Fast: 7 spins */
  }
  14% { 
    transform: rotateY(-3060deg); /* 8.5 spins */
  }
  15% { 
    transform: rotateY(-3420deg); /* 9.5 spins */
  }
  16% { 
    transform: rotateY(-3690deg); /* 10.25 spins */
  }
  17% { 
    transform: rotateY(-3870deg); /* 10.75 spins */
  }
  18% { 
    transform: rotateY(-4005deg); /* 11.125 spins */
  }
  19% { 
    transform: rotateY(-4095deg); /* 11.375 spins */
  }
  20% { 
    transform: rotateY(-4185deg); /* 11.625 spins */
  }
  21% { 
    transform: rotateY(-4275deg); /* 11.875 spins */
  }
  22% { 
    transform: rotateY(-4365deg); /* 12.125 spins */
  }
  23% { 
    transform: rotateY(-4455deg); /* 12.375 spins */
  }
  24% { 
    transform: rotateY(-4500deg); /* Settle on "app" (12.5 spins = 180deg equivalent) */
  }
  88% { 
    transform: rotateY(-4500deg); /* Hold on "app" - stay stable */
  }
  92% {
    transform: rotateY(-4500deg); /* Keep stable during main rotation back */
  }
  96% {
    transform: rotateY(-4500deg); /* Still stable */
  }
  97% {
    transform: rotateY(-4590deg); /* Quick flip after main completes */
  }
  98% {
    transform: rotateY(-4680deg); /* Back to "ppa" (13 full spins = 0deg) */
  }
  100% { 
    transform: rotateY(-4680deg);
  }
}

@media (max-width: 768px) {
  .word-container {
    perspective: 800px;
  }
}
